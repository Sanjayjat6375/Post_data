<% layout('/layouts/boilerplate.ejs') %>
    <div class="w-[70%] mx-auto py-24">
        <div class="container mx-auto px-4">
            <div class="py-8 md:w-full mx-auto">
                <h3 class="text-xl font-bold mb-4">Create listing:</h3>
                <div class="">
                    <form id="listingForm" method="post" action="/listings" enctype="multipart/form-data" onsubmit="return validateForm()">
                        <div class="mb-4">
                            <label for="title" class="block text-gray-700 font-semibold mb-2">Title</label>
                            <input type="text" name="title" id="title" placeholder="Enter the title"
                                class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <p id="errTitle" class="text-red-500 mt-2 hidden">Please enter a title.</p>
                        </div>
                        <div class="mb-4">
                            <label for="description" class="block text-gray-700 font-semibold mb-2">Description</label>
                            <input type="text" name="description" id="description" placeholder="Enter the description"
                                class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <p id="errDescription" class="text-red-500 mt-2 hidden">Please enter a description.</p>
                        </div>
                        <!-- <div class="mb-4">
                            <label for="image" class="block text-gray-700 font-semibold mb-2">Image Url</label>
                            <input type="text" name="image" id="image" placeholder="Enter the image URL"
                                class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <p id="errImage" class="text-red-500 mt-2 hidden">Please enter an image URL.</p>
                        </div> -->
                        <div class="mb-4">
                            <label for="image" class="block text-gray-700 font-semibold mb-2">Upload Image</label>
                            <input type="file" name="listing[image]" id="image" placeholder="Enter the image URL"
                                class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <p id="errImage" class="text-red-500 mt-2 hidden">Please enter an image URL.</p>
                        </div>
                        <div class="mb-4">
                            <label for="price" class="block text-gray-700 font-semibold mb-2">Price</label>
                            <input type="text" name="price" id="price" placeholder="Enter the price"
                                class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <p id="errPrice" class="text-red-500 mt-2 hidden">Please enter a valid price.</p>
                        </div>
                        <div class="grid md:grid-cols-2 gap-5">
                            <div class="mb-4">
                                <label for="location" class="block text-gray-700 font-semibold mb-2">Location</label>
                                <input type="text" name="location" id="location" placeholder="Enter the location"
                                    class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <p id="errLocation" class="text-red-500 mt-2 hidden">Please enter a location.</p>
                            </div>
                            <div class="mb-4">
                                <label for="country" class="block text-gray-700 font-semibold mb-2">Country</label>
                                <input type="text" name="country" id="country" placeholder="Enter the country"
                                    class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <p id="errCountry" class="text-red-500 mt-2 hidden">Please enter a country.</p>
                            </div>
                        </div>
                        <div>
                            <button type="submit"
                                class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        function validateForm() {
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const image = document.getElementById('image').value;
            const price = document.getElementById('price').value;
            const location = document.getElementById('location').value;
            const country = document.getElementById('country').value;

            let isValid = true;

            if (title === "") {
                document.getElementById('errTitle').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('errTitle').classList.add('hidden');
            }

            if (image === "") {
                document.getElementById('errImage').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('errImage').classList.add('hidden');
            }

            if (description === "") {
                document.getElementById('errDescription').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('errDescription').classList.add('hidden');
            }

            if (price === "") {
                document.getElementById('errPrice').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('errPrice').classList.add('hidden');
            }

            if (location === "") {
                document.getElementById('errLocation').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('errLocation').classList.add('hidden');
            }

            if (country === "") {
                document.getElementById('errCountry').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('errCountry').classList.add('hidden');
            }

            return isValid;
        }
    </script>